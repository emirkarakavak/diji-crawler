1) Yeni site eklerken (Ã¶rn: epinparasi)

Scraperâ€™Ä±n DBâ€™ye yazdÄ±ÄŸÄ± deÄŸerlerle birebir aynÄ± keyâ€™leri kullan.

a) SITE_LABELS (gÃ¶rÃ¼nen ad)

const SITE_LABELS = {
  gamesatis:  "GameSatÄ±ÅŸ",
  hesapcomtr: "HesapComTR",
  vatangame:  "VatanGame",
  bynogame:   "ByNoGame",
  perdigital: "PerDigital",
  epinparasi: "EpinParasÄ±",        // <â€” YENÄ°
};

b) SITE_ORDER (sekme sÄ±rasÄ±)

const SITE_ORDER = ["gamesatis", "hesapcomtr", "vatangame", "bynogame", "perdigital", "epinparasi"]; // <â€” YENÄ° SONA

c) Kategori listeleri (scraperâ€™Ä±n yazdÄ±ÄŸÄ± categoryName stringleri)

const MLBB_CATEGORIES = [
  // ...
  "epinparasi-mlbb-tr",           // <â€” YENÄ° (MLBB TR)
  "epinparasi-mlbb-global",       // <â€” YENÄ° (MLBB Global)
];

const PUBG_CATEGORIES = [
  // ...
  "epinparasi-pubgm-tr",          // <â€” varsa
  "epinparasi-pubgm-global",      // <â€” varsa
];


2) Mevcut siteye yeni kategori eklerken

Sadece ilgili diziye eklemen yeter:

const MLBB_CATEGORIES = [
  // mevcutlar...
  "gamesatis-mlbb-superpaket",   // <â€” yeni kategori Ã¶rneÄŸi
];

Scraperâ€™Ä±n categoryName olarak bunlardan birini yazdÄ±ÄŸÄ±ndan emin ol.


3) (Ä°leride) Yeni oyun eklemek istersen (Ã¶r: Free Fire)

SeÃ§enek A Ã§izgisinde kalacaksan bir oyun daha tanÄ±mlarsÄ±n:

// a) Yeni oyun kategorileri
const FREEFIRE_CATEGORIES = [
  "gamesatis-ff-tr", "gamesatis-ff-global",
  "hesap-ff-tr", "hesap-ff-global",
  // ... diÄŸer siteler
];

// b) Toplama dizi
const ALL_CATEGORIES = [...MLBB_CATEGORIES, ...PUBG_CATEGORIES, ...FREEFIRE_CATEGORIES];

// c) Oyun seti (oyunu ayÄ±rmak iÃ§in)
const MLBB_SET = new Set(MLBB_CATEGORIES);
const PUBG_SET  = new Set(PUBG_CATEGORIES);
const FF_SET    = new Set(FREEFIRE_CATEGORIES);

// d) View-model baÅŸlangÄ±cÄ±
const model = {
  mlbb:  { id: "mlbb",  label: "Mobile Legends", sites: {} },
  pubgm: { id: "pubgm", label: "Pubg Mobile",    sites: {} },
  ff:    { id: "ff",    label: "Free Fire",      sites: {} }, // <â€” yeni sekme
};

// e) itemâ€™Ä± oyuna yerleÅŸtirme
const cat = it.categoryName || "";
const game =
  MLBB_SET.has(cat) ? "mlbb" :
  PUBG_SET.has(cat) ? "pubgm" :
  FF_SET.has(cat)   ? "ff"   : null;

// f) En altta categories Ã§Ä±ktÄ±sÄ±
const categories = [
  { id: model.mlbb.id,  label: model.mlbb.label,  sites: finalizeSites(model.mlbb.sites) },
  { id: model.pubgm.id, label: model.pubgm.label, sites: finalizeSites(model.pubgm.sites) },
  { id: model.ff.id,    label: model.ff.label,    sites: finalizeSites(model.ff.sites) }, // <â€”
];


4) KÃ¼Ã§Ã¼k kontrol listesi

Scraperâ€™larda:

siteName â†’ SITE_LABELS/SITE_ORDER keyâ€™iyle aynÄ± slug (kÃ¼Ã§Ã¼k harf Ã¶neririm).

categoryName â†’ MLBB_CATEGORIES/PUBG_CATEGORIES dizilerindeki stringlerden biri.

Yeni site eklediÄŸinde sadece 3 yeri gÃ¼ncelliyorsun: SITE_LABELS, SITE_ORDER, ilgili CATEGORIES dizisi.

Yeni kategori eklediÄŸinde yalnÄ±zca ilgili CATEGORIES dizisi.

Not: Indexâ€™leri ekledin; Ã¼retimde bir kez await Item.syncIndexes() Ã§alÄ±ÅŸtÄ±rÄ±p logâ€™da â€œensuredâ€ gÃ¶rmen iyi olur.


KapanÄ±ÅŸta 5 minik â€œproductionâ€ Ã¶nerisi bÄ±rakÄ±yorum:

.env â†’ MONGO_URI, HEADLESS=true, TZ=Europe/Istanbul.

Cron: stagger et (Ã¶rn. bng 00, gamesatis 05, â€¦) ki aynÄ± anda yÃ¼klenmesin.

persist.jsâ€™te debug flagâ€™i kapalÄ± tut; sadece sorun olduÄŸunda aÃ§.

Item.syncIndexes()â€™i bir kez deploy sonrasÄ± Ã§alÄ±ÅŸtÄ±rÄ±p logla.

Health check: /healthz â†’ Mongo ping + son cron run timestamp.

TakÄ±ldÄ±ÄŸÄ±n yerde yaz, hÄ±zlÄ±ca Ã§Ã¶zeriz. ğŸ™Œ